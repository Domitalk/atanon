(this.webpackJsonpatanon=this.webpackJsonpatanon||[]).push([[0],{119:function(e,t,a){e.exports=a(152)},124:function(e,t,a){},125:function(e,t,a){},152:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(9),r=a.n(c),l=(a(124),a(35)),i=a(16),s=(a(125),a(41)),m=a(188),u=a(102),d=a(206),p=a(101),f=a(187),h=a(189),g=a(45),b=a(157);var E=function(e){var t=Object(g.a)(),a=Object(p.a)({typography:{htmlFontSize:8}}),n=o.a.useState(null),c=Object(i.a)(n,2),r=c[0],l=c[1],E=function(){l(null),e.clearSearchBar()};return o.a.createElement("div",{className:"header",position:"fixed"},o.a.createElement(m.a,{onClick:function(e){l(e.currentTarget)},classes:t,variant:"outlined",color:"primary",className:"logo","aria-controls":"simple-menu","aria-haspopup":"true"},o.a.createElement(f.a,{theme:a},o.a.createElement(h.a,null,"@ANON"))),o.a.createElement(u.a,{anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:E,TransitionComponent:b.a},o.a.createElement(d.a,{onClick:E},o.a.createElement(s.b,{style:{textDecoration:"none",fontWeight:"bold",color:"#F44A26"},activeStyle:{textDecoration:"none",fontWeight:"bold",color:"#F44A26"},exact:!0,to:"/atanon/"}," Home")),o.a.createElement(d.a,{onClick:E},o.a.createElement(s.b,{style:{textDecoration:"none",fontWeight:"bold",color:"#F44A26"},activeStyle:{textDecoration:"none",fontWeight:"bold",color:"#F44A26"},exact:!0,to:"/atanon/post"},"Upload")),o.a.createElement(d.a,{onClick:function(){e.setShowSearch(!e.showSearch),l(null)}},o.a.createElement(s.b,{style:{textDecoration:"none",fontWeight:"bold",color:"#F44A26"},to:"/atanon"},"Search"))))},j=a(64),v=a(192),y=a(193),O=a(195),x=a(197),S=a(196),k=a(194),w=a(3),N=a(202),C=a(104),T=a(105),P=a(93),z=a.n(P),A=a(207),F=a(203),I=a(97),W=a.n(I),D=Object(v.a)((function(e){return{margin:{margin:e.spacing(1)}}})),_=Object(v.a)((function(e){return{root:{"& .MuiTextField-root":{margin:"none",width:200}}}})),B=Object(v.a)((function(e){return{root:{maxWidth:304,margin:"auto",borderRadius:10,position:"relative"},content:{padding:24},title:{color:"#fff",letterSpacing:"2px",textShadow:"#260C0C 1px 0 10px"},likes:{color:"#fff",letterSpacing:"2px",textShadow:"#260C0C 1px 0 10px"}}})),R=function(e){var t=B(),a=Object(C.a)(),c=Object(T.a)(),r=Object(n.useState)(!1),l=Object(i.a)(r,2),s=l[0],u=l[1],d=_(),p=Object(n.useState)(""),f=Object(i.a)(p,2),h=f[0],g=f[1],b=D(),E=function(t){e.post.id&&e.addReaction({post_id:e.post.id,rtype:t})},j=function(){u(!s)},v=function(t){e.post.id?(e.addTagToPost(h,e.post.id),g("")):alert("You cannot add tags until you finish creating the post!")},P=function(t){e.setSearchTerms(t),e.setShowSearch(!0)};return o.a.createElement(z.a,{isFlipped:s,flipDirection:"horizontal",infinite:"true"},o.a.createElement(y.a,{key:"front",variant:"outlined",className:Object(w.a)(t.root,c.root)},o.a.createElement(k.a,{classes:a,image:e.post.image_url}),o.a.createElement(O.a,null,o.a.createElement(S.a,{onDoubleClick:j,className:t.content},o.a.createElement(N.a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:360,color:"common.white",textAlign:"center"},o.a.createElement("h1",{className:t.title},e.post.comment)))),o.a.createElement(x.a,{className:"reactionBox"},o.a.createElement(m.a,{variant:"outlined",color:"secondary",className:"order",value:"1",size:"small",name:"1",onClick:function(){return E(1)}},o.a.createElement("span",{className:t.likes},e.post.heart)," \u2764\ufe0f"),o.a.createElement(m.a,{variant:"outlined",color:"secondary",className:"order",size:"small",name:"2",onClick:function(){return E(2)}},o.a.createElement("span",{className:t.likes},e.post.smile)," \ud83d\ude0a"),o.a.createElement(m.a,{variant:"outlined",color:"secondary",className:"order",size:"small",name:"3",onClick:function(){return E(3)}},o.a.createElement("span",{className:t.likes},e.post.sad)," \ud83d\ude14"),o.a.createElement(m.a,{variant:"outlined",color:"secondary",className:"order",size:"small",name:"4",onClick:function(){return E(4)}},o.a.createElement("span",{className:t.likes},e.post.angry)," \ud83d\ude20"))),o.a.createElement(y.a,{key:"back",className:Object(w.a)(t.root,c.root)},o.a.createElement(k.a,{classes:a,image:e.post.image_url}),o.a.createElement(O.a,null,o.a.createElement(S.a,{onDoubleClick:j,className:t.content},o.a.createElement(N.a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:360,color:"common.white",textAlign:"center",className:b.root},o.a.createElement("h3",{className:t.title},e.post.id?function(){var a=[];for(var n in e.post.stags)a.push([n,e.post.stags[n]]);return a.sort((function(e,t){return t[1]-e[1]})),a.map((function(e){return o.a.createElement(m.a,{key:e[0],name:e[0],onClick:function(){P(e[0])},className:b.margin,color:"secondary",size:"large",variant:"outlined"},o.a.createElement("span",{className:t.likes},e[0]," ",e[1]>1?" x".concat(e[1]):null))}))}():null)))),o.a.createElement(x.a,{direction:"",className:"reactionBox"},o.a.createElement("form",{className:d.root,autoComplete:"on"},o.a.createElement(F.a,{label:"new tag",defaultValue:"",name:"New Tag Field",variant:"standard",color:"secondary",size:"small",onChange:function(e){g(e.target.value)},value:h,onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),v())}})),o.a.createElement(A.a,{title:"Create New Tag"},o.a.createElement(m.a,{size:"small",variant:"outlined",color:"secondary",onClick:v},o.a.createElement(W.a,{color:"secondary"}))))))},M=a(198),J=a(98),L=a.n(J),U=a(199),H=Object(v.a)((function(e){return{root:{flexGrow:1,spacing:8},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},progressRoot:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),Y=function(e){var t=H();return o.a.createElement("div",Object(j.a)({className:t.root},"className","spaced"),o.a.createElement(L.a,{pageStart:0,loadMore:e.fetchMorePosts,hasMore:!0,loader:o.a.createElement("div",{className:"loader",key:0}," ",o.a.createElement("br",null),e.canFetch?o.a.createElement(U.a,{color:"secondary"}):null,o.a.createElement("br",null)),useWindow:!1},o.a.createElement(M.a,{container:!0,spacing:4},e.posts.map((function(a){return o.a.createElement(M.a,{item:!0,xs:12,sm:6,md:4,lg:4},o.a.createElement(R,{setShowSearch:e.setShowSearch,setSearchTerms:e.setSearchTerms,className:t.paper,key:a.id,post:a,addReaction:e.addReaction,addTagToPost:e.addTagToPost}))})))))},G=a(33),V=Object(v.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}}}})),q=Object(v.a)({root:{maxWidth:"70vw"}}),K=Object(v.a)((function(e){return{root:{flexGrow:1}}})),$=Object(v.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"67vw"}}}})),Q=function(e){var t=K(),a=$(),c=q(),r=V(),l=Object(n.useState)(""),s=Object(i.a)(l,2),u=s[0],d=s[1],p=Object(n.useState)(""),f=Object(i.a)(p,2),h=f[0],b=f[1],E=Object(g.a)(),v={image_url:u,comment:h},O=function(e){"image_url"===e.target.name?d(e.target.value):"comment"===e.target.name&&b(e.target.value)},x=function(t){t.preventDefault(),h.length>1&&u.length>1&&fetch("https://atanon-api.herokuapp.com/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image_url:u,comment:h})}).then((function(e){return e.json()})).then((function(t){d(""),b(""),e.addPostToFrontOfArray(t),e.history.push("/atanon/")}))},S=window.cloudinary.createUploadWidget({cloudName:"dwazq8zps",uploadPreset:"zvziodpl"},(function(e,t){k(t,e)})),k=function(e,t){"success"===e.event&&d("".concat(e.info.secure_url))};return o.a.createElement("div",Object(j.a)({className:"spaced"},"className",t.root),o.a.createElement("br",null),o.a.createElement(M.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:9},o.a.createElement(M.a,{item:!0},o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(R,{post:v})),o.a.createElement(M.a,{item:!0},o.a.createElement(y.a,{align:"center",className:c.root},o.a.createElement("form",{className:a.root,onSubmit:x,noValidate:!0,autoComplete:"off"},o.a.createElement(F.a,{label:"Image URL",type:"url",name:"image_url",value:u,onChange:O,variant:"filled"}),o.a.createElement(F.a,{label:"Comment",multiline:!0,type:"text",name:"comment",rows:"5",value:h,onChange:O,variant:"filled"}),o.a.createElement(m.a,{onClick:function(){if(u.includes("w_400/a_270")){var e=u.split("/"),t=e.findIndex((function(e){return"upload"===e}));e.splice(t+1,2);var a=e.join("/");d("".concat(a))}else{var n=u.split("/"),o=n.findIndex((function(e){return"upload"===e}));n.splice(o+1,0,"w_400/a_270");var c=n.join("/");d("".concat(c))}},classes:E},"Rotate Counter-clock"),o.a.createElement("p",null,"*While uploading on mobile, some cameras save at different angles than expected."),o.a.createElement(N.a,{align:"center",className:r.root},o.a.createElement(m.a,{onClick:function(){S.open()},classes:E},"Upload Your Own Photo"),o.a.createElement(m.a,{onClick:x,classes:E},"Submit Your Post")))))))},X=a(204),Z=a(200),ee=a(201),te=a(100),ae=a.n(te),ne=a(103),oe=a(99),ce=a.n(oe),re=a(205),le=Object(v.a)((function(e){return{root:{position:"fixed",zIndex:1,padding:"2px 4px",display:"flex",alignItems:"center",bottom:"3vh",margin:"0 auto",right:"20vw"},fabButton:{position:"fixed",zIndex:1,bottom:"3vh",right:"4vw",margin:"0 auto"},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #ff8a65",boxShadow:e.shadows[0],padding:e.spacing(2,4,3),outline:0}}}));var ie=function(e){var t=Object(g.a)({chubby:!0}),a=Object(n.useState)(!0),c=Object(i.a)(a,2),r=c[0],m=c[1],u=le(),d=Object(n.useState)([]),p=Object(i.a)(d,2),f=p[0],h=p[1],j=Object(n.useState)(!1),v=Object(i.a)(j,2),y=v[0],O=v[1],x=Object(n.useState)(""),S=Object(i.a)(x,2),k=S[0],w=S[1],N=Object(ne.a)(),C=Object(n.useState)(!0),T=Object(i.a)(C,2),P=T[0],z=T[1],A=function(e){fetch("https://atanon-api.herokuapp.com/reactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){var t=f.findIndex((function(t){return t.id===e.id}));h([].concat(Object(l.a)(f.slice(0,t)),[e],Object(l.a)(f.slice(t+1))))}))};Object(n.useEffect)((function(){fetch("https://atanon-api.herokuapp.com/posts").then((function(e){return e.json()})).then((function(e){h(e)}))}),[]);var F=function(){f.length>0&&P&&setTimeout((function(){fetch("https://atanon-api.herokuapp.com/posts/".concat(f[f.length-1].id)).then((function(e){return e.json()})).then((function(e){e.length>0?h([].concat(Object(l.a)(f),Object(l.a)(e))):z(!1)}))}),1500)},I=function(e){h([e].concat(Object(l.a)(f)))},W=function(){m(!1)},D=function(e,t){fetch("https://atanon-api.herokuapp.com/stags",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({post_id:t,stagname:e})}).then((function(e){return e.json()})).then((function(e){var t=f.findIndex((function(t){return t.id===e.id}));h([].concat(Object(l.a)(f.slice(0,t)),[e],Object(l.a)(f.slice(t+1))))}))};return o.a.createElement(s.a,null,o.a.createElement("div",{className:"App"},o.a.createElement(E,{clearSearchBar:function(){w(""),O(!1)},setShowSearch:O,showSearch:y}),y?o.a.createElement("div",{className:u.root},o.a.createElement(re.a,{classes:N,placeholder:"Search...",startAdornment:o.a.createElement(ce.a,null),value:k,onChange:function(e){w(e.target.value)}})):null,o.a.createElement(X.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:u.modal,open:r,onClose:W,closeAfterTransition:!0,BackdropComponent:Z.a,BackdropProps:{timeout:500}},o.a.createElement(b.a,{in:r},o.a.createElement("div",{className:u.paper,onClick:W},o.a.createElement("h2",{id:"transition-modal-title"},"Welcome to @ANON"),o.a.createElement("p",{id:"transition-modal-description"},"Where you can post and react anonymously"),o.a.createElement("p",{id:"transition-modal-description"},"If you double click/tap on a post you can add tags")))),o.a.createElement(G.a,{exact:!0,path:"/(|atanon)",render:function(e){return o.a.createElement(Y,Object.assign({},e,{posts:k.length>2?(z(!1),f.filter((function(e){var t=!1;if(e.id)return Object.keys(e.stags).forEach((function(e){e.toLowerCase().includes(k.toLowerCase())&&(t=!0)})),e.id&&e.comment.toLowerCase().includes(k.toLowerCase())&&(t=!0),!!t}))):(z(!0),f),fetchMorePosts:F,addReaction:A,addTagToPost:D,canFetch:P,setSearchTerms:w,setShowSearch:O}))}}),o.a.createElement(G.a,{exact:!0,path:"/atanon/post",render:function(e){return o.a.createElement(Q,Object.assign({},e,{addPostToFrontOfArray:I}))}}),o.a.createElement(ee.a,{onClick:function(){w(""),O(!1)},classes:t,"aria-label":"add",className:u.fabButton},o.a.createElement(s.b,{exact:!0,to:"/atanon/post",style:{textDecoration:"inherit",color:"inherit"}},o.a.createElement(ae.a,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[119,1,2]]]);
//# sourceMappingURL=main.46f0dd5f.chunk.js.map