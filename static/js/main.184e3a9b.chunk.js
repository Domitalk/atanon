(this.webpackJsonpatanon=this.webpackJsonpatanon||[]).push([[0],{111:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(7),r=n.n(c),l=(n(82),n(35)),i=n(27),s=(n(83),n(39)),u=n(139),m=n(153),p=n(154),d=n(67),f=n(141),h=n(142);var E=function(e){var t=Object(d.a)({typography:{htmlFontSize:8}}),n=o.a.useState(null),a=Object(i.a)(n,2),c=a[0],r=a[1],l=function(){r(null)};return o.a.createElement("div",{className:"header",position:"fixed"},o.a.createElement(u.a,{className:"logo","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){r(e.currentTarget)}},o.a.createElement(f.a,{theme:t},o.a.createElement(h.a,null,"@ANON"))),o.a.createElement(m.a,{id:"simple-menu",anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:l},o.a.createElement(p.a,{onClick:l},o.a.createElement(s.b,{style:{textDecoration:"non"},activeStyle:{textDecoration:"none",fontWeight:"bold",color:"black"},exact:!0,to:"/atanon/"}," HOME")),o.a.createElement(p.a,{onClick:l},o.a.createElement(s.b,{style:{textDecoration:"non"},activeStyle:{textDecoration:"none",fontWeight:"bold",color:"black"},exact:!0,to:"/atanon/post"}," UPLOAD"))))},g=n(65),b=n(144),O=n(145),v=n(147),j=n(149),y=n(148),k=n(146),x=n(3),w=n(152),N=n(68),C=n(69),S=Object(b.a)((function(){return{root:{maxWidth:304,margin:"auto",borderRadius:30,position:"relative"},content:{padding:24},title:{color:"#fff",letterSpacing:"2px"}}})),P=function(e){var t=S(),n=Object(N.a)(),a=Object(C.a)(),c=function(t){e.post.id&&e.addReaction({post_id:e.post.id,rtype:t})};return o.a.createElement(O.a,{className:Object(x.a)(t.root,a.root)},o.a.createElement(k.a,{classes:n,image:e.post.image_url}),o.a.createElement(v.a,null,o.a.createElement(y.a,{className:t.content},o.a.createElement(w.a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:360,color:"common.white",textAlign:"center"},o.a.createElement("h1",{className:t.title},e.post.comment)))),o.a.createElement(j.a,null,o.a.createElement(u.a,{value:"1",size:"small",name:"1",onClick:function(){return c(1)}},e.post.heart," \u2764\ufe0f"),o.a.createElement(u.a,{size:"small",name:"2",onClick:function(){return c(2)}},e.post.smile," \ud83d\ude0a"),o.a.createElement(u.a,{size:"small",name:"3",onClick:function(){return c(3)}},e.post.sad," \ud83d\ude14"),o.a.createElement(u.a,{size:"small",name:"4",onClick:function(){return c(4)}},e.post.angry," \ud83d\ude20")))},z=n(150),T=n(151),_=n(66),A=n.n(_),D=Object(b.a)((function(e){return{root:{flexGrow:1,spacing:8},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},progressRoot:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),R=function(e){var t=D();return o.a.createElement("div",Object(g.a)({className:t.root},"className","spaced"),o.a.createElement(A.a,{pageStart:0,loadMore:e.fetchMorePosts,hasMore:!0,loader:o.a.createElement("div",{className:"loader",key:0}," ",o.a.createElement(T.a,null)),useWindow:!1},o.a.createElement(z.a,{container:!0,spacing:4},e.posts.map((function(n){return o.a.createElement(z.a,{item:!0,xs:12,sm:6,md:4,lg:4},o.a.createElement(P,{className:t.paper,key:n.id,post:n,addReaction:e.addReaction}))})))))},W=n(25),M=function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),c=n[0],r=n[1],l=Object(a.useState)(""),s=Object(i.a)(l,2),u=s[0],m=s[1],p={image_url:c,comment:u},d=function(e){"image_url"===e.target.name?r(e.target.value):"comment"===e.target.name&&m(e.target.value)},f=window.cloudinary.createUploadWidget({cloudName:"dwazq8zps",uploadPreset:"zvziodpl"},(function(e,t){h(t,e)})),h=function(e,t){"success"===e.event&&(console.log("photo url",e.info.secure_url),r("".concat(e.info.secure_url)))};return o.a.createElement("div",{className:"spaced"},o.a.createElement("br",null),o.a.createElement("h2",null,"Preview"),o.a.createElement(P,{post:p}),o.a.createElement("form",{onSubmit:function(t){t.preventDefault(),u.length>1&&c.length>1&&fetch("https://atanon-api.herokuapp.com/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image_url:c,comment:u})}).then((function(e){return e.json()})).then((function(t){r(""),m(""),e.addPostToFrontOfArray(t),e.history.push("/atanon/")}))}},o.a.createElement("h3",null,"Image URL "),o.a.createElement("input",{type:"url",name:"image_url",value:c,onChange:d}),o.a.createElement("h3",null,"Or Upload"),o.a.createElement("button",{onClick:function(){f.open()}},"Upload Your Own Photo"),o.a.createElement("h3",null,"Comment"),o.a.createElement("textarea",{name:"comment",value:u,onChange:d}),o.a.createElement("br",null),o.a.createElement("input",{type:"submit"})))};var U=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],r=function(e){fetch("https://atanon-api.herokuapp.com/reactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){var t=n.findIndex((function(t){return t.id===e.id}));c([].concat(Object(l.a)(n.slice(0,t)),[e],Object(l.a)(n.slice(t+1))))}))};Object(a.useEffect)((function(){fetch("https://atanon-api.herokuapp.com/posts").then((function(e){return e.json()})).then((function(e){c(e)}))}),[]);var u=function(){n.length>0&&setTimeout((function(){fetch("https://atanon-api.herokuapp.com/posts/".concat(n[n.length-1].id)).then((function(e){return e.json()})).then((function(e){console.log(e),c([].concat(Object(l.a)(n),Object(l.a)(e)))}))}),2e3)},m=function(e){c([e].concat(Object(l.a)(n)))};return o.a.createElement(s.a,null,o.a.createElement("div",{className:"App"},o.a.createElement(E,null),o.a.createElement(W.a,{exact:!0,path:"/atanon/",render:function(e){return o.a.createElement(R,Object.assign({},e,{posts:n,fetchMorePosts:u,addReaction:r}))}}),o.a.createElement(W.a,{exact:!0,path:"/atanon/post",render:function(e){return o.a.createElement(M,Object.assign({},e,{addPostToFrontOfArray:m}))}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},77:function(e,t,n){e.exports=n(111)},82:function(e,t,n){},83:function(e,t,n){}},[[77,1,2]]]);
//# sourceMappingURL=main.184e3a9b.chunk.js.map